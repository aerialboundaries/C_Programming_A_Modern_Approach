/* C Programming A Modern Approach ex6-13.c
 * 2025-11-05
 *
 * Rewrite the following loop so that its body is empty:
 * for (n = 0; m > 0; n++)
 *   m /= 2;
 */

// My Answer:
// for(n = 0; m > 0, m /= 2; n++)
/* empty body */;
--wrong

    // Correct:
    // for(n = 0; m > 0; m /= 2, n++)
    /* empty body */;

✅ 正しい書き方 C

    for (n = 0; m > 0; n++) m /= 2;
// ↓ 置き換え
for (n = 0; m > 0; m /= 2, n++)
  ; // 空のループ本体 (Null Statement)
💡 なぜ m /= 2,
    n++ にするのか？ C言語のfor文のヘッダーは3つの部分で構成されています。

        初期化部(Initialization)

            条件部(Condition)

                更新部(Update / Increment)

                    元のループの処理は以下の2つの処理で構成されています。

        ループ継続条件のチェック : m
                                   > 0

                                   ループ変数の更新 : m
    /= 2 と n++

    for文の更新部（3番目のセミコロンの後）では、カンマ演算子(m /= 2, n++)
        を使って複数の式を記述できます。カンマ演算子で繋がれた式は、左から順に評価されます。

    元のコードでは：

    m
    /= 2 はループ本体で行われていました。

    n++ は更新部で行われていました。

    ループ本体を空にするには、本体で行われていた処理 m
    /= 2 を更新部へ移動させる必要があります。

❌ あなたの回答が間違っている理由 あなたの回答はこのようになっていました。

       C

       for (n = 0; m > 0, m /= 2; n++)
       //          ^^^^^^^^^^^^^
       ここで m
       > 0,
    m /= 2 が条件部に書かれていますね。

    カンマ演算子の性質 :
    条件部でカンマ演算子を使うと、評価結果は最も右側の式の値になります。つまり、m
        > 0,
    m /= 2 の評価結果は、m /= 2 の計算後の値になってしまいます。

    動作の違い :
    ループ本体を空にする目的は、処理 m /=
    2 を更新部へ移動することです。条件部へ移動してしまうと、m /=
    2 の処理は条件チェックの一部として実行されてしまい、元のコードと実行タイミングが異なってしまう可能性があります。（特にmが1の時など）

    元のコードの意図通り、m
    /=
    2 がループ本体の最後に実行される処理になるように、更新部へ移動させるのが正解です。

    今回の問題は、カンマ演算子を更新部で効果的に使う練習ですね！C言語の構文の深い部分に触れていて、とても良いトレーニングになりますよ。

    次に進む前に、このカンマ演算子の更新部での使い方について、何か質問はありますか？
